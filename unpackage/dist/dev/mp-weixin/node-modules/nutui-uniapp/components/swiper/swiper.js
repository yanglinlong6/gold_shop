"use strict";const e=require("../../../../common/vendor.js"),y=`${e.PREFIX}-swiper`,z=e.defineComponent({name:y,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),U=e.defineComponent({...z,props:e.swiperProps,emits:e.swiperEmits,setup(k,{expose:F,emit:q}){const n=k,R=e.getCurrentInstance(),I=`container-${e.refRandomId}`,o=e.reactive({active:0,num:0,rect:null,width:0,height:0,moving:!1,offset:0,touchTime:0,autoplayTimer:null,childrenVNode:[],style:{}}),r=e.useTouch(),V=e.computed(()=>({[y]:!0})),l=e.computed(()=>n.direction==="vertical"),X=e.computed(()=>{const t=y;return{[`${t}-inner`]:!0,[`${t}-vertical`]:l.value}}),Y=e.computed(()=>{const t=y;return{[`${t}-pagination`]:!0,[`${t}-pagination-vertical`]:l.value}}),c=e.computed(()=>l.value?r.deltaY.value:r.deltaX.value),M=e.computed(()=>r.direction.value===n.direction),i=e.computed(()=>v.length),f=e.computed(()=>o[l.value?"height":"width"]),S=e.computed(()=>i.value*f.value),g=e.computed(()=>o.rect?(l.value?o.rect.height:o.rect.width)-f.value*i.value:0),T=e.computed(()=>(o.active+i.value)%i.value);function $(){let t=0;t=o.offset,o.style={transitionDuration:`${o.moving?0:n.duration}ms`,transform:`translate${l.value?"Y":"X"}(${t}px)`,[l.value?"height":"width"]:`${f.value*i.value}px`,[l.value?"width":"height"]:`${l.value?o.width:o.height}px`}}const{internalChildren:v}=e.useProvide(e.SWIPER_KEY,"nut-form-swiper")({props:n,size:f});function _(t,u=0){let a=t*f.value;n.loop||(a=Math.min(a,-g.value));let s=u-a;return n.loop||(s=e.clamp(s,g.value,0)),s}function j(t){const{active:u}=o;return t?n.loop?e.clamp(u+t,-1,i.value):e.clamp(u+t,0,i.value-1):u}function p({pace:t=0,offset:u=0,isEmit:a=!1}){if(i.value<=1)return;const{active:s}=o,h=j(t),d=_(h,u);if(n.loop){if(v[0]&&d!==g.value){const E=d<g.value;v[0].exposed.setOffset(E?S.value:0)}if(v[i.value-1]&&d!==0){const E=d>0;v[i.value-1].exposed.setOffset(E?-S.value:0)}}o.active=h,o.offset=d,a&&s!==o.active&&q("change",T.value),$()}function C(){o.moving=!0,o.active<=-1&&p({pace:i.value}),o.active>=i.value&&p({pace:-i.value})}function m(){o.autoplayTimer&&clearTimeout(o.autoplayTimer)}function x(t){C(),r.reset(),e.requestAniFrame(()=>{e.requestAniFrame(()=>{o.moving=!1,p({pace:t,isEmit:!0})})})}function B(){x(-1)}function A(){x(1)}function N(t){C(),r.reset(),e.requestAniFrame(()=>{o.moving=!1;let u;n.loop&&i.value===t?u=o.active===0?0:t:u=t%i.value,p({pace:u-o.active,isEmit:!0})})}function w(){+n.autoPlay<=0||i.value<=1||(m(),o.autoplayTimer=setTimeout(()=>{A(),w()},Number(n.autoPlay)))}async function b(t=+n.initPage){m(),o.rect=await e.useRect(I,R),o.rect&&(t=Math.min(i.value-1,t),o.width=n.width?+n.width:o.rect.width,o.height=n.height?+n.height:o.rect.height,o.active=t,o.offset=_(o.active),o.moving=!0,$(),w())}function D(t){n.isStopPropagation&&t.stopPropagation(),n.touchable&&(r.start(t),o.touchTime=Date.now(),m(),C())}function O(t){n.touchable&&o.moving&&(r.move(t),M.value&&p({offset:c.value}))}function P(t){if(!n.touchable||!o.moving)return;const u=c.value/(Date.now()-o.touchTime);if((Math.abs(u)>.3||Math.abs(c.value)>+(f.value/2).toFixed(2))&&M.value){let s=0;const h=l.value?r.offsetY.value:r.offsetX.value;n.loop?s=h>0?c.value>0?-1:1:0:s=-Math[c.value>0?"ceil":"floor"](c.value/f.value),p({pace:s,isEmit:!0})}else c.value&&p({pace:0});o.moving=!1,$(),w()}return F({prev:B,next:A,to:N}),e.onDeactivated(()=>{m()}),e.onBeforeUnmount(()=>{m()}),e.watch(()=>n.initPage,t=>{e.nextTick$1(()=>{b(+t)})}),e.watch(()=>n.height,t=>{e.nextTick$1(()=>{b(+t)})}),e.watch(()=>v.length,()=>{e.nextTick$1(()=>{b()})}),e.watch(()=>n.autoPlay,t=>{+t>0?w():m()}),(t,u)=>e.e({a:e.n(e.unref(X)),b:e.s(o.style),c:t.paginationVisible&&!t.$slots.page},t.paginationVisible&&!t.$slots.page?{d:e.f(e.unref(v).length,(a,s,h)=>({a:s,b:e.unref(T)===s?t.paginationColor:"#ddd",c:e.unref(T)===s?1:""})),e:e.n(e.unref(Y))}:{},{f:I,g:e.n(e.unref(V)),h:e.n(t.customClass),i:t.isPreventDefault,j:e.s(t.customStyle),k:e.o((...a)=>D&&D(...a)),l:e.o((...a)=>O&&O(...a)),m:e.o((...a)=>P&&P(...a)),n:e.o((...a)=>P&&P(...a))})}}),W=e._export_sfc(U,[["__file","/Users/yanglinlong/WebstormProjects/gold_shop/node_modules/nutui-uniapp/components/swiper/swiper.vue"]]);wx.createComponent(W);
